{"ast":null,"code":"// src/models/ProductModel.js\nimport api from '../services/api';\nexport class Product {\n  constructor(data) {\n    this.id = data._id || data.id;\n    this.name = data.name;\n    this.price = data.price;\n    this.discountPrice = data.discountPrice || null;\n    this.image = data.image;\n    this.description = data.description;\n    this.types = data.types || [];\n    this.tag = data.tag || [];\n    this.brands = data.brands || [];\n    this.colors = data.colors || [];\n    this.titles = data.titles || [];\n    this.subTitles = data.subTitles || [];\n  }\n}\nclass ProductModel {\n  constructor() {\n    this.cache = new Map(); // Cache để tránh gọi API nhiều lần\n  }\n  async _fetch(url) {\n    if (this.cache.has(url)) return this.cache.get(url);\n    try {\n      const response = await api.get(url);\n      const products = (response.data.products || []).map(p => new Product(p));\n      this.cache.set(url, products);\n      return products;\n    } catch (error) {\n      var _error$response;\n      console.error(`API Error [${url}]:`, ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error.message);\n      return [];\n    }\n  }\n  async getAllProducts() {\n    return this._fetch('/products');\n  }\n  async getProductsByTitle(titlePath) {\n    return this._fetch(`/products/title/${encodeURIComponent(titlePath)}`);\n  }\n  async getProductsBySubTitle(subTitlePath) {\n    return this._fetch(`/products/subtitle/${encodeURIComponent(subTitlePath)}`);\n  }\n  async getProductsByTag(tag) {\n    return this._fetch(`/products/tag/${encodeURIComponent(tag)}`);\n  }\n  async getProductsByType(type) {\n    return this._fetch(`/products/type/${encodeURIComponent(type)}`);\n  }\n}\nexport default ProductModel();","map":{"version":3,"names":["api","Product","constructor","data","id","_id","name","price","discountPrice","image","description","types","tag","brands","colors","titles","subTitles","ProductModel","cache","Map","_fetch","url","has","get","response","products","map","p","set","error","_error$response","console","message","getAllProducts","getProductsByTitle","titlePath","encodeURIComponent","getProductsBySubTitle","subTitlePath","getProductsByTag","getProductsByType","type"],"sources":["D:/Hoang.bk/Documents/GitHub/HHSHOP/Frontend/src/models/ProductModel.js"],"sourcesContent":["// src/models/ProductModel.js\r\nimport api from '../services/api';\r\n\r\nexport class Product {\r\n  constructor(data) {\r\n    this.id = data._id || data.id;\r\n    this.name = data.name;\r\n    this.price = data.price;\r\n    this.discountPrice = data.discountPrice || null;\r\n    this.image = data.image;\r\n    this.description = data.description;\r\n    this.types = data.types || [];\r\n    this.tag = data.tag || [];\r\n    this.brands = data.brands || [];\r\n    this.colors = data.colors || [];\r\n    this.titles = data.titles || [];\r\n    this.subTitles = data.subTitles || [];\r\n  }\r\n}\r\n\r\nclass ProductModel {\r\n  constructor() {\r\n    this.cache = new Map(); // Cache để tránh gọi API nhiều lần\r\n  }\r\n\r\n  async _fetch(url) {\r\n    if (this.cache.has(url)) return this.cache.get(url);\r\n    try {\r\n      const response = await api.get(url);\r\n      const products = (response.data.products || []).map(p => new Product(p));\r\n      this.cache.set(url, products);\r\n      return products;\r\n    } catch (error) {\r\n      console.error(`API Error [${url}]:`, error.response?.data || error.message);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async getAllProducts() {\r\n    return this._fetch('/products');\r\n  }\r\n\r\n  async getProductsByTitle(titlePath) {\r\n    return this._fetch(`/products/title/${encodeURIComponent(titlePath)}`);\r\n  }\r\n\r\n  async getProductsBySubTitle(subTitlePath) {\r\n    return this._fetch(`/products/subtitle/${encodeURIComponent(subTitlePath)}`);\r\n  }\r\n\r\n  async getProductsByTag(tag) {\r\n    return this._fetch(`/products/tag/${encodeURIComponent(tag)}`);\r\n  }\r\n\r\n  async getProductsByType(type) {\r\n    return this._fetch(`/products/type/${encodeURIComponent(type)}`);\r\n  }\r\n}\r\n\r\nexport default ProductModel();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}